<!DOCTYPE html>
<html>
<head>
    <title>Terminology</title>
</head>
<body>

    <h1 id="terminology">Terminology</h1>
<ul>
<li><strong>TS</strong>: transport stream, the file extension is normally <em>.ts, .tts, .m2ts, .mts</em></li>
<li><strong>ISOBMFF</strong>: ISO-based Media File Format, the file extension is normally <em>.mp4, .mov, m4a, m4v, .m4s</em></li>
<li><strong>Matroska</strong>: a multimedia container format based on EBML (Extensible Binary Meta Language), the file extension is normally <em>.mkv, .mka, .mk3d and .webm</em></li>
</ul>
<h1 id="what-is-dumpts">What is DumpTS?</h1>
<p>DumpTS is a simple utility tool to process the multimedia files packed into main-stream multimedia container formats, which provides these kinds of features:</p>
<ul>
<li>Extract and repack the elementary stream data or PSI sections data from <em>TS, ISOBMFF and Matroska</em> file</li>
<li>Show media information of elementary streams, <em>ISOBMFF</em> box and <em>Matroska EBML</em> element</li>
<li>Re-factor a <em>TS</em> stream file in place</li>
<li>Extract some elementary streams, and reconstruct a partial <em>TS</em> file</li>
<li>Provide some utility features for <em>ISOBMFF</em> file reconstruction</li>
</ul>
<h1 id="how-to-build">How to build?</h1>
<p>Use VS2015 to open DumpTS.sln to build it</p>
<h1 id="how-to-run-it">How to run it?</h1>
<p><em>Usage: DumpTS.exe TSSourceFileName [OPTION]...</em></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Option</th>
<th style="text-align: center;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>--output</strong></td>
<td style="text-align: center;"><em>filename</em></td>
<td style="text-align: left;">the output dumped file path</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--pid</strong></td>
<td style="text-align: center;"><em>0xhhhh</em></td>
<td style="text-align: left;">the PID of dumped stream</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--trackid</strong></td>
<td style="text-align: center;"><em>xx</em></td>
<td style="text-align: left;">the track ID of a ISOBMFF/Matroska file</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--destpid</strong></td>
<td style="text-align: center;"><em>0xhhhh</em></td>
<td style="text-align: left;">the PID of source stream will be replaced with this PID</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--srcfmt</strong></td>
<td style="text-align: center;"><em>ts, m2ts, tts, mp4, mkv, huffman_codebook</em></td>
<td style="text-align: left;">the source media format, Including: ts, m2ts, mp4, mkv and huffman_codebook,if it is not specified, find the sync-word to decide it. <BR>BTW:<BR><strong>mp4</strong>: it is for the ISOBMFF, for example, .mov, .mp4, .m4s, .m4a...<BR><strong>mkv</strong>, it is for Matroska based file-format, for example, .mkv, .webm...<BR><strong>huffman_codebook:</strong><br>the VLC tables</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--outputfmt</strong></td>
<td style="text-align: center;"><em>ts, m2ts, pes, es, wav, pcm, binary_search_table</em></td>
<td style="text-align: left;">the destination dumped format, including: ts, m2ts, pes, es and so on<br><strong>binary_search_table:</strong><br>generate the binary search table for Huffman VLC codebook</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--stream_id</strong></td>
<td style="text-align: center;"><em>0xhh</em></td>
<td style="text-align: left;">the stream_id in PES header of dumped stream</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--stream_id_extension</strong></td>
<td style="text-align: center;"><em>0xhh</em></td>
<td style="text-align: left;">the stream_id_extension in PES header of dumped stream</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--removebox</strong></td>
<td style="text-align: center;"><em>xxxx</em></td>
<td style="text-align: left;">remove the box elements in MP4 file</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--boxtype</strong></td>
<td style="text-align: center;"><em>xxxx</em></td>
<td style="text-align: left;"><strong>For ISOBMFF/mp4 source:</strong><BR>the box type FOURCC, i.e. --boxtype=stsd<BR><strong>For Matroska/mkv source:</strong><BR>the EBML ID, i.e. --boxtype=0x1A45DFA3</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--crc</strong></td>
<td style="text-align: center;"><em>crc-type, all</em></td>
<td style="text-align: left;">Specify the crc type, if crc type is not specified, list all crc types, if 'all' is specified, calculate all types of crc values</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--showpts</strong></td>
<td style="text-align: center;"><em>N/A</em>.</td>
<td style="text-align: left;">print the pts of every elementary stream packet</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--showinfo</strong></td>
<td style="text-align: center;"><em>N/A</em></td>
<td style="text-align: left;">print the media information of elementary stream, for example, PMT stream types, stream type, audio sample rate, audio channel mapping, video resolution, frame-rate and so on</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--listcrc</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">List all CRC types supported in this program</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--listmp4box</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">List box types and descriptions defined in ISO-14496 spec</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--listmkvEBML</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">List EBML elements defined in Matroska spec</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--dashinitmp4</strong></td>
<td style="text-align: center;"><em>filename</em></td>
<td style="text-align: left;">the initialization MP4 file to describe the DASH stream global information</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--VLCTypes</strong></td>
<td style="text-align: center;"><em>[ahdob][ahdob][ahdob]</em></td>
<td style="text-align: left;">Specify the number value literal formats, a: auto; h: hex; d: dec; o: oct; b: bin, for example, &quot;aah&quot; means:<br>Value and length will be parsed according to literal string, codeword will be parsed according as hexadecimal</td>
</tr>
<tr>
<td style="text-align: left;"><strong>--verbose</strong></td>
<td style="text-align: center;"><em>0~n</em></td>
<td style="text-align: left;">print more message in the intermediate process</td>
</tr>
</tbody>
</table>
<p>Here are some examples of command lines:</p>
<pre><code>DumpTS c:\00001.m2ts --showinfo
</code></pre>
<p>it will show the PAT and PMT informations of 00001.m2ts</p>
<pre><code>DumpTS c:\00001.m2ts --output=c:\00001.hevc --pid=0x1011 --srcfmt=m2ts --outputfmt=es --showpts  
</code></pre>
<p>It will dump a hevc es stream with PID 0x1011 from the m2ts stream file: c:\00001.m2ts, and print the PTS of every frame.</p>
<pre><code>DumpTS C:\test.ts --output=c:\00001.m2ts --pid=0x100 --destpid=0x1011 --srcfmt=ts --outputfmt=m2ts  
</code></pre>
<p>It will re-factor the file: c:\test.ts, and replace the PID 0x100 with 0x1011 in TS pack and PSI, and convert it to a m2ts</p>
<pre><code>DumpTS C:\00022.m2ts --output=c:\00022.mlp --pid=0x1100 --srcfmt=m2ts --outputfmt=es 
--stream_id_extension=0x72  
</code></pre>
<p>It will dump a MLP sub-stream from C:\00022.m2ts with the PID 0x1100 and stream_id_extension in PES: 0x72</p>
<pre><code>DumpTS C:\\test.mp4 --showinfo --removebox='unkn'
</code></pre>
<p>Show the MP4 file box layout, and remove box with type 'unkn'</p>
<pre><code>DumpTS C:\\tes.mp4 --output=c:\test.hevc --trackid=1 --outputfmt=es
</code></pre>
<p>Dump the track#1 of test.mp4, and save its elementary stream data to file test.hevc, the VSP, SPS and PPS will be merged into elementary stream data.</p>
<pre><code>DumpTS C:\\test.mp4 --trackid=1 --boxtype=stsd --showinfo
</code></pre>
<p>Show the 'stsd' box information, for example, HEVC/AVC resolution, chroma, bit-depth and so on</p>
<pre><code>DumpTS C:\\av1.webm --showinfo
</code></pre>
<p>Show the tree view for the EBML elements of av1.webm</p>
<pre><code>DumpTS e:\tearsofsteel_4sec0025_3840x2160.y4m-20000.av1.webm --trackid=1 --output=e:\tearsofsteel_4sec0025_4K.av1
</code></pre>
<p>Extract av1 video stream from .webm file</p>


</body>
</html>